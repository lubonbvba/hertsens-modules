<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_hertsens_destination_hist_form" model="ir.ui.view">
            <field name="name">hertsens.destination.hist.form</field>
            <field name="model">hertsens.destination.hist</field>
            <field name="arch" type="xml">
                <form string="History detail">
                    <group>
                        <group>
                            <field name="place_id"/>
                            <field name="ride_id"/>
                            <field name="vehicle_id"/>
                            <field name="employee_id"/>
                            <field name="cmr"/>
                            <field name="pallet_load"/>
                            <field name="pallet_unload"/>
                            <field name="ref"/>
                            <field name="remarks"/>
                            <field name="km"/>
                            <field name="arrivaldate"/>
                            <field name="leavingdate"/>
                            <field name="geo_lookupname"/>
                            <field name="longitude"/>
                            <field name="latitude"/>
                        </group>
                        <group>
                            <field name="lastupdate"/>
                            <field name="status"/>
                            <field name="cancelstatus"/>
                            <field name="transferstatus"/>
                            <button type="object" string="Cancel" name='cancel_transics_planning'/>
                        </group>
                        <field name="raw"/>
                    </group>
                </form>
            </field>
        </record>
        <record id="view_hertsens_destination_hist_tree" model="ir.ui.view">
            <field name="name">hertsens.destination.hist.tree</field>
            <field name="model">hertsens.destination.hist</field>
            <field name="arch" type="xml">
                <tree string="History">
                            <field name="place_id"/>
                            <field name="ride_id"/>
                            <field name="vehicle_id"/>
                            <field name="employee_id"/>
                            <field name="cmr"/>
                            <field name="km"/>
                            <field name="lastupdate"/>
                            <field name="status"/>
                            <field name="cancelstatus"/>
                            <field name="transferstatus"/>
                            <!-- button type="object" string="Cancel" name='cancel_transics_planning'/ -->
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="hertsens_account_invoice_operational_tree">
            <field name="name">hertsens.account_invoice_operational_tree02</field>
            <field name="model">account.invoice</field>
            <field name="priority">99</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';black:state in ('proforma','proforma2','open');gray:state == 'cancel'" string="Invoice" create="0">
                    <field name="partner_id" groups="base.group_user"/>
                    <field name="commercial_partner_id" invisible="1"/>
                    <field name="date_invoice"/>
                    <field name="number"/>
                    <field name="reference" invisible="1"/>
                    <field name="name" invisible="1"/>
                    <field name="journal_id" invisible="1"/>
                    <field name="period_id" invisible="1" groups="account.group_account_user"/>
                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    <field name="user_id" string="Responsible"/>
                    <field name="date_due"/>
                    <field name="origin"/>
                    <field name="currency_id" groups="base.group_multi_currency"/>
                    <field name="residual" sum="Residual Amount"/>
                    <field name="amount_untaxed" sum="Untaxed Amount"/>
                    <field name="amount_total" sum="Total Amount"/>
                    <field name="state"/>
                    <field name="type" invisible="context.get('type',True)"/>
                </tree>
            </field>
        </record>        
        <record model="ir.ui.view" id="hertsens_view_users_form_simple_modif">
            <field name="name">hertsens.view_users_form_simple_modif</field>
            <field name="model">res.users</field>
            <field name="inherit_id" ref="base.view_users_form_simple_modif"/>
            <field name="arch" type="xml">
                <field name="company_id" position="after">
                    <field name="operational_mode" widget="radio" />
                </field>                   
            </field>
        </record>        
        <record model="ir.ui.view" id="hertsens_company_form">
            <field name="name">lubon_qlan.company_form</field>
            <field name="model">res.company</field>
            <field name="inherit_id" ref="base.view_company_form"/>
            <field name="arch" type="xml">
                <field name="currency_id" position="after">
                    <field name="default_rides_product"  domain="[('company_id','=', active_id)]"/>
                    <field name="default_diesel_product"  domain="[('company_id','=', active_id)]"/>
                    <field name="default_charges_vat_product"  domain="[('company_id','=', active_id)]"/>
                    <field name="default_charges_exvat_product"  domain="[('company_id','=', active_id)]"/>
                </field>                   
            </field>
        </record>
        <record model="ir.ui.view" id="hertsens_account_invoice_form">
            <field name="name">hertsens.account_invoice_form</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name="arch" type="xml">
                <notebook position="inside">
                    <page string="Rides">
                        <div>
                            <button name="generate_csv_data" type="object" String="Make csv"/>
                            <field name="rides_csv_data" filename="rides_csv_save"/>
                        </div>
                        <field name="rides_ids" readonly="1">
                            <tree>
                                <field name="datum"/>
                                <field name="vertrek"/>
                                <field name="bestemming"/>
                                <field name="refklant"/>
                                <field name="ritprijs"/>
                                <field name="wachttijd"/>
                                <field name="total_ride_price"/>
                                <field name="charges_vat"/>
                                <field name="charges_exvat"/>
                                <field name="finished"/>
                                <field name="cmr"/>
                                <field name="state"/>

                            </tree>
                        </field>

                    </page>
                </notebook>
            </field>
        </record>
        <record id="action_ritten_create_invoice" model="ir.actions.act_window">
            <field name="name">Create Invoice</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hertsens.invoice.create</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="multi" eval="1"/>
        </record>

        <record model="ir.values" id="values_ritten_create_invoice">
            <!-- field name="model_id" ref="model_account_analytic_account" /-->
            <field name="name">Invoice</field>
            <field name="key2">client_action_multi</field>
            <field name="value" eval="'ir.actions.act_window,' + str(ref('action_ritten_create_invoice'))" />
            <field name="key">action</field>
            <field name="model">hertsens.rit</field>
        </record>
        <record id="view_hertsens_invoice_create_form" model="ir.ui.view">
            <field name="name">ritten.invoice.create.form</field>
            <field name="model">hertsens.invoice.create</field>
            <field name="arch" type="xml">
                <form string="Invoice contract">
                    <p>Do you want to show details of each activity to your customer?</p>
                    <group>
                        <group>
                            <field name="date"/>
                            <field name="oneline"/>
                            <field name="allrides_valid"/>
                        </group>
                    </group>
                    <notebook>
                     <page string="Rides">    
                      <field name="rides_ids">
                       <tree string="Rides to be invoiced" default_order="partner_id">
                           <field name="partner_id"/>
                           <field name="datum"/>
                           <field name="vertrek"/>
                           <field name="bestemming"/>
                           <field name="refklant" />
                           <field name="ritprijs" />
                           <field name="wachttijd" />
                           <field name="charges_vat" />
                           <field name="charges_exvat" />
                           <field name="finished"/>
                           <field name="cmr" />
                           <field name="state" />
                       </tree>
                   </field> 
               </page>
           </notebook>       
           <footer>
            <button name="do_create" string="Create Invoice" type="object" class="oe_highlight" attrs="{'invisible': [('allrides_valid', '=', False)]}"/>
            or
            <button string="Cancel" class="oe_link" special="cancel"  />
        </footer>
    </form>
</field>
</record>
<record model="ir.ui.view" id="ritten_tree_view">
    <field name="name">ritten.tree</field>
    <field name="model">hertsens.rit</field>
    <field name="priority">1</field>

    <field name="arch" type="xml">
        <tree string="Ritten Tree" zeditable="top" default_order="datum desc"  colors="blue:state == 'planned';black:state in ('completed');red:state=='waiting';green:state=='toinvoice';gray:state == 'invoiced'"  >
           <field name="id" options="{'no_quick_create':True,'no_create_edit':True}"/>
           <field name="partner_id" string="Customer" options="{'no_quick_create':True,'no_create_edit':True}" attrs="{'readonly': [('state', '=', 'invoiced')]}"/> 
           <field name="company_id" invisible="True" options="{'no_quick_create':True,'no_create_edit':True}"/>
           <field name="datum" attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)],'required':[('is_recurring','=',False)]}"/>
           <field name="define_departure_time"/>
           <field name="departure_time" attrs="{'readonly':[('define_departure_time','=',False)]}" />

           <field name="vertrek" attrs="{'readonly': [('state', '=', 'invoiced')]}"/>
           <field name="bestemming" attrs="{'readonly': [('state', '=', 'invoiced')]}"/>
           <field name="refklant" attrs="{'readonly': [('state', '=', 'invoiced')]}" />
           <field name="ritprijs" attrs="{'readonly': [('state', '=', 'invoiced')]}" />
           <field name="vehicle_type_id" required="True" attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)]}"/>
           <field name="wachttijd" attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)]}" />
           <field name="total_ride_price" sum="Total" attrs="{'readonly': [('state', '=', 'invoiced')]}"/>
           <field name="charges_vat" sum="Total" attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)]}"/>
           <field name="charges_exvat" sum="Total" attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)]}"/>
           <field name="finished" attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)]}"/>
           <field name="cmr"  attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)]}"/>
           <field name="state" attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)]}" />
           <field name="is_recurring" readonly="True" />
       </tree>
   </field>
</record>
<record model="ir.ui.view" id="ritten_form_view">
    <field name="name">ritten.form</field>
    <field name="model">hertsens.rit</field>
    <field name="priority">1</field>
    <field name="arch" type="xml">
        <form string="Ritten form">
           <header>
              <field name="state" widget="statusbar"/>
          </header>
          <sheet>
          <group>
            <group>
                <field name="id" />"
                <field name="is_recurring" />"
                <field name="company_id" string="Company"  options="{'no_quick_create':True,'no_create_edit':True}" invisible="True" />
                <field name="partner_id" string="Customer" domain="[('customer','=',True)]" options="{'no_quick_create':True,'no_create_edit':True}" attrs="{'readonly': [('state', '=', 'invoiced')]}"/>
                <field name="vehicle_type_id" required="True"/>
                <field name="datum" attrs="{'invisible':[('is_recurring','=',True)], 'required':[('is_recurring','=',False)]}"/>
                <field name="vertrek"/>
                <field name="bestemming"/>
                <field name="refklant" />
                <field name="ritprijs" />
            </group>
            <group attrs="{'invisible':[('is_recurring','=',True)]}">
             <field name="wachttijd" />
             <field name="charges_vat" />
             <field name="charges_exvat" />
             <field name="finished" attrs="{'readonly': ['|',('state', '=', 'invoiced'),('is_recurring','=',True)]}"/>
             <field name="cmr" />
             <field name="state" />
             <field name="invoice_id" domain="[('partner_id','=',partner_id)]" />
         </group>
         <group name="remarks">
            <field name="remarks"/>
            <field name="google_navigation_url" widget="url"/>
         </group>
                            <group>
                        <field name="driver_id"/>
                        <!--field name="vehicle_id"/ -->
                        <field name="last_msg" invisible='1'/>
                        <field name="last_msg_display" readonly='1'/>
                        <button name="dispatch_ride" type="object" string="SMS" help="Toewijzen met SMS"/>
                        <button name="dispatch_ride_silent" type="object" string="Wijs toe, zonder SMS" help="Deze button geeft de mogelijkheid om een rit die bv mondeling toegewezen is mee in het tracking systeem te zetten." />
                        <button name="clr_last_msg" type="object" string="CLR" help="Last msg clearen"/>

                    </group>
     </group>
     <notebook>
        <page string="Destinations">
        <group>
          <group>  
          <button name="dispatch_transics_wizard" type="object" string="Dispatch Transics" attrs="{'invisible':[('state','not in',['planned'])]}"/>
          </group>
        </group>
          <field name="destination_ids" options='{"always_reload": True}'>
             <tree string="Destinations" editable="bottom" default_order="sequence">
               <field name="sequence" widget="handle"/>
               <field name="id" invisible="1" />
               <field name="rit_id"  invisible="1"/>
                <field name="place_id" context="{'show_address_line':1,  'form_view_ref':'hertsens_base.view_address_simple_form', 'default_type': 'place', 'default_is_company': False,  'default_customer': False,'default_country_id': %(base.be)d}" options='{"always_reload": True,"no_quick_create":True}' domain="[('type','=','place')]"/> 
                <!--field name="destination" /-->
               <field name="activity_id" />              
               <field name="state" readonly="True" />              
               <field name="vehicle_id" readonly="True" />              
               <field name="employee_id" readonly="True" />              
               <field name="ref" />              
               <field name="remarks" /> 
               <button type="object" string="X" name='cancel_transics_planning' help="Click to cancel this destination"/>             
           </tree>
       </field>
   </page>
   <page string="History">
    <field name="hist_ids" readonly="1" options='{"always_reload": True}'>
    <tree string="Destination History">
        <field name="place_id"/>
        <field name="vehicle_id"/>
        <field name="employee_id"/>
        <field name="cmr"/>
        <field name="ref"/>
        <field name="remarks"/>
        <field name="pallet_unload"/>
        <field name="pallet_load"/>
        <field name="km"/>
        <field name="longitude"/>
        <field name="latitude"/>
        <field name="state"/>
        <field name="status"/>
        <field name="transferstatus"/>
        <field name="cancelstatus"/>
        <button name="cancel_transics_planning" type='object' string="x" />
    </tree>
    </field>
   </page>
        <page string="Recurrency settings" attrs="{'invisible':[('is_recurring','=',False)]}">
             <group>
                 <group >
                     <field name="recurring_active" />
                     <field name="recurring_start_date" attrs="{'required':[('is_recurring','=',True)]}"/>
                     <field name="recurring_end_date" />
                     <!-- field name="recurring_departure_time"/ -->
                     <field name="recurring_interval" />
                     <field name="recurring_interval_type" />
                     <field name="recurring_offset" />
                     <field name="recurring_next_date"/>
                     <field name="recurring_active_days" widget="many2many_checkboxes" attrs="{'invisible':[('recurring_interval','!=',1)]}"/>
                 </group>
                 <group>
 <!--                    <button name="check_recurrent_rides" type="object" string="test"/> -->
                </group>
            </group>
        </page>
        <page string="Scheduled rides" attrs="{'invisible':[('is_recurring','=',False)]}">
            <field name="child_ids"/>
        </page>


</notebook>
                                    </sheet>
                        <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                        </div>
</form>

</field>
</record>

<record model="ir.ui.view" id="ritten_search_view" >
    <field name="name">ritten.search</field>
    <field name="model">hertsens.rit</field>
    <field name="arch" type="xml">
        <search string="Search Ritten">
         <field name="cmr" string="CMR, Ref, vertrek, bestemming" filter_domain="['|','|','|',('cmr','ilike',self),('refklant','ilike',self),('vertrek','ilike',self),('bestemming','ilike',self)]"/>
         <field name="id" string="ID" filter_domain="[('id','=',self)]"/>
         <field name="last_msg" string="Last message" filter_domain="[('last_msg','ilike',self)]"/>
         <field name="driver_id" string="Chauffeur" filter_domain="[('driver_id','ilike',self)]"/>
         <filter name="active" string="Active" domain="[('state','in',['quoted','planned','completed','waiting'])]" help="Active "/>
         <filter name="planned_today" string="Planned Today" domain="['&amp;',('state','=','planned'),('datum','=', ((context_today().strftime('%Y-%m-%d'))))]" help="Planned today "/>
         <filter name="dispatched" string="Dispatched" domain="['&amp;',('state','=','dispatched'),('is_recurring','!=', True)]" help="Dispatched, in progress"/>
         <filter name="finished_today" string="Finished Today" domain="['&amp;',('finished','=',True),('datum','=', ((context_today().strftime('%Y-%m-%d'))))]" help="Planned today "/>

         <filter name="planned" string="Planned" domain="[('state','=','planned')]" help="Planned "/>
         <filter name="waiting" string="Waiting" domain="[('state','=','waiting')]" help="Waiting "/>
         <filter name="toinvoice" string="To be invoiced" domain="[('state','=','toinvoice')]" help="Ready for invoicing"/>

         <filter name="Quote" string="Quoted" domain="[('state','=','Quoted')]" help="Invoiced"/>
         <filter name="invoiced" string="Invoiced" domain="[('state','=','invoiced')]" help="Invoiced"/>
         <filter name="Recurring" string="Recurring" domain="[('is_recurring','=',True)]"/>
         <filter name="cancelled" string="Cancelled" domain="[('state','=','cancelled')]" help="Invoiced"/>
         <!-- field name="driver_id" operator="child_of"/ -->
         <field name="partner_id" operator="child_of"/>
         <field name="company_id" operator="child_of"/>
         <separator/>
         <group expand="0" string="Group By">
             <filter name="group_by_company" string="Company" context="{'group_by':'company_id'}"/>
             <filter name="group_by_partner" string="Customer" context="{'group_by':'partner_id'}"/>
             <filter string="Salesperson" context="{'group_by':'user_id'}"/>
             <separator/>
             <filter string="Status" context="{'group_by':'state'}"/>
         </group>
     </search>
 </field>
</record>
<!--          <record model="ir.ui.view" id="contracten_tree_view">
            <field name="name">contracten.tree</field>
            <field name="model">account.analytic.account</field>
            <field name="arch" type="xml">
                <tree string="Contracten Tree" editable="top">
                    <field name="company_id"  />
                    <field name="partner_id" domain="[('company_id','=',company_id),('customer','=',1)]" context="{'default_company_id':company_id}"/>
                    <field name="name" />
                    <field name="diesel" />
                    <field name="cmr" />                    
                    <field name="type" invisible="1"/>        
                </tree>
            </field>
        </record> -->






        <record model="ir.actions.act_window" id="her_customers_action">
            <field name="name">Customers Hertsens</field>
            <field name="res_model">res.partner</field>
            <field name="domain">[('company_id','=',3),('customer','=',1)]</field>
            <field name="context">{'default_customer':1, 'default_company_id':3,'default_is_company':True}</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
        </record>
<!--        <record model="ir.actions.act_window" id="her_contracts_action">
            <field name="name">Contracten Hertsens</field>
            <field name="res_model">account.analytic.account</field>
            <field name="domain">[('company_id','=',3),('type','=','contract')]</field>
            <field name="context">{'default_company_id':3, 'default_type':'contract'}</field>
            <field name="view_id" ref="contracten_tree_view"></field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record> -->
        <record model="ir.actions.act_window" id="her_ritten_action">
            <field name="name">Ritten Hertsens</field>
            <field name="res_model">hertsens.rit</field>
            <field name="domain">[('company_id','=',3) ]</field>
            <field name="context">{'default_company_id':3,'search_default_active': 1 }</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="her_ritten_invoice_action">
            <field name="name">Ritten Hertsens</field>
            <field name="res_model">hertsens.rit</field>
            <field name="domain">[('company_id','=',3),('state','=','toinvoice') ]</field>
            <field name="context">{'default_company_id':3}</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>

 <!--       <record model="ir.actions.act_window" id="jlh_contracts_action">
            <field name="name">Contracten JLH Logistics</field>
            <field name="res_model">account.analytic.account</field>
            <field name="domain">[('company_id','=',1),('type','=','contract')]</field>
            <field name="context">{'default_company_id':1, 'default_type':'contract'}</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="contracten_tree_view"></field>
            <field name="view_mode">tree,form,kanban</field>
        </record> -->
        <record model="ir.actions.act_window" id="jlh_ritten_action">
            <field name="name">Ritten JLH Logistics</field>
            <field name="res_model">hertsens.rit</field>
            <field name="domain">[('company_id','=',1) ]</field>
            <field name="context">{'default_company_id':1,'search_default_active': 1}</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="jlh_ritten_invoice_action">
            <field name="name">Ritten JLH Logistics</field>
            <field name="res_model">hertsens.rit</field>
            <field name="domain">[('company_id','=',1),('state','=','toinvoice') ]</field>
            <field name="context">{'default_company_id':1}</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="all_ritten_action">
            <field name="name">Ritten</field>
            <field name="res_model">hertsens.rit</field>
            <!--            <field name="domain">[('partner_id','child_of', active_id)]</field> -->
            <!--            <field name="context">{'default_partner_id':ref('res.partner.partner_id'), 'default_company_id':ref('res.partner.company_id')}></field> -->
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="rittenmenu_action">
            <field name="name">Ritten</field>
            <field name="res_model">hertsens.rit</field>
            <field name="domain"></field>
            <!-- field name="context">{'default_partner_id':ref('res.partner.partner_id'), 'default_company_id':ref('res.partner.company_id')}></field> -->
            <field name="context">{'search_default_active': 1 }</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="rittenmenu_planned_today_action">
            <field name="name">Ritten</field>
            <field name="res_model">hertsens.rit</field>
            <field name="domain"></field>
            <!-- field name="context">{'default_partner_id':ref('res.partner.partner_id'), 'default_company_id':ref('res.partner.company_id')}></field> -->
            <field name="context">{'search_default_planned_today': 1 }</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="rittenmenu_dispatched_today_action">
            <field name="name">Ritten</field>
            <field name="res_model">hertsens.rit</field>
            <field name="domain"></field>
            <!-- field name="context">{'default_partner_id':ref('res.partner.partner_id'), 'default_company_id':ref('res.partner.company_id')}></field> -->
            <field name="context">{'search_default_dispatched': 1 }</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="rittenmenu_finished_today_action">
            <field name="name">Ritten</field>
            <field name="res_model">hertsens.rit</field>
            <field name="domain"></field>
            <!-- field name="context">{'default_partner_id':ref('res.partner.partner_id'), 'default_company_id':ref('res.partner.company_id')}></field> -->
            <field name="context">{'search_default_finished_today': 1 }</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="ritten_tree_view"></field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="histmenu_action">
            <field name="name">Hist</field>
            <field name="res_model">hertsens.destination.hist</field>
            <field name="domain"></field>
            <!-- field name="context">{'default_partner_id':ref('res.partner.partner_id'), 'default_company_id':ref('res.partner.company_id')}></field> -->
            <!--field name="context">{'search_default_active': 1 }</field-->
            <field name="view_type">form</field>
            <!--field name="view_id" ref="ritten_tree_view"></field -->
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="jlh_customers_action">
            <field name="name">Customers JLH Logistics</field>
            <field name="res_model">res.partner</field>
            <field name="domain">[('company_id','=',1),('customer','=',1)]</field>
            <field name="context">{'default_customer':1, 'default_company_id':1}</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
        </record>
        <record model="ir.actions.act_window" id="hertsens_jlh_invoices_action">
            <field name="name">Invoices JLH Logistics</field>
            <field name="res_model">account.invoice</field>
            <field name="domain">[('company_id','=',1)]</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="hertsens_account_invoice_operational_tree"/>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.actions.act_window" id="hertsens_her_invoices_action">
            <field name="name">Invoices Hertsens</field>
            <field name="res_model">account.invoice</field>
            <field name="domain">[('company_id','=',3)]</field>
            <field name="view_id" ref="hertsens_account_invoice_operational_tree"/>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <record id="partner_ritten_button" model="ir.ui.view">
            <field name="name">hertsens_base.partner_ritten_button</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr='//div[@name="buttons"]' position='inside'>
                    <button class="oe_inline oe_stat_button" type="action" name="%(all_ritten_action)d" 
                        icon="fa-truck" context="{'search_default_partner_id': active_id,'default_partner_id': active_id}" >
                        <field name="ritten_count" string="Ritten" widget="statinfo"/>
                    </button>    
                </xpath>

            </field>
        </record>
        <record id="view_address_simple_form" model="ir.ui.view">
            <field name="name">hertsens_base.partner.simplified.form</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <form string="Address">
                    <field name="image" widget='image' class="oe_avatar oe_left" options='{"preview_image": "image_medium"}'/>
                    <div class="oe_title">
                        <div class="oe_edit_only">
                            <label for="name"/> <!-- (
                            <field name="is_company" on_change="onchange_type(is_company)" class="oe_inline"/> <label for="is_company" string="Is a Company?"/>) -->
                        </div>
                        <h1>
                            <field name="name" default_focus="1" placeholder="Name"  attrs="{'readonly': [('geo_ok', '=', True)]}"/>
                        </h1>
                        <!--field name="parent_id"
                            placeholder="Company"
                            domain="[('is_company', '=', True)]" context="{'default_is_company': True}"
                            attrs="{'invisible': [('is_company','=', True)]}"/-->
                    </div>
                    <group>
                        <field name="user_ids" invisible="1"/>
                        <!--field name="email" widget="email" required="context.get('force_email', False)" attrs="{'required': [('user_ids','!=', [])]}"/ -->
                        <field name="type" invisible="1"/>
                            <group>
                                <field name="street" attrs="{'readonly': [('geo_ok', '=', True)]}"/>
                                <field name="zip" attrs="{'readonly': [('geo_ok', '=', True)]}" />
                                <field name="city" attrs="{'readonly': [('geo_ok', '=', True)]}"/>
                                <field name="country_id"  options="{'no_open':True,'no_create':True}" attrs="{'readonly': [('geo_ok', '=', True)]}"/>
                            </group>
                            <group>
                                <field name="geo_ok"/>
                                <field name="geo_longitude" readonly="0"/>
                                <field name="geo_latitude" readonly="0"/>
                                <field name="geo_name" readonly="1"/>
                                <field name="geo_google_maps_url" string="Google" widget="url"/>
                                <button type="object" name="get_geo" string="Geo"/>
                            </group>
                        
                        <field name="phone" invisible="1"/>
                        <field name="mobile" invisible="1"/>
                    </group>
                </form>
            </field>
        </record>

        <menuitem id="her_customers_menu" name="Hertsens" parent="base.menu_partner_form" action="her_customers_action" groups="hertsens_base.group_hertsens_user_her"/>
        <menuitem id="jlh_customers_menu" name="JLH Logistics" parent="base.menu_partner_form" action="jlh_customers_action" groups="hertsens_base.group_hertsens_user_jlh"/>


        <menuitem id="ritten_menu" name="Rides" parent="base.menu_base_partner" sequence="10" />
        <menuitem id="planning_ritten_menu" name="Planning" parent="ritten_menu" sequence="20" />
        <menuitem id="planning_planned_today_menu" name="Planned" parent="planning_ritten_menu" sequence="10" action="rittenmenu_planned_today_action"/>
        <menuitem id="planning_dispatched_today_menu" name="Dispatched" parent="planning_ritten_menu" sequence="20" action="rittenmenu_dispatched_today_action"/>
        <menuitem id="planning_dfinished_today_menu" name="Finished" parent="planning_ritten_menu" sequence="30" action="rittenmenu_finished_today_action"/>


        <menuitem id="all_ritten_menu" name="Rides" parent="ritten_menu" sequence="0" action="rittenmenu_action" />
        <menuitem id="all_hist_menu" name="Hist" parent="transics.menu_config_transics" sequence="0" action="histmenu_action" />
        
        <menuitem id="hertsens_invoicing_menu" name="Invoicing" parent="base.menu_base_partner" sequence="3" />
        <menuitem id="hertsens_toinvoice_menu" name="To be invoiced" parent="hertsens_invoicing_menu" sequence="1" action="" />
        <menuitem id="hertsens_her_ritten_invoice_menu" name="Hertsens" parent="hertsens_toinvoice_menu" sequence="1" action="her_ritten_invoice_action" />
        <menuitem id="hertsens_jlh_ritten_invoice_menu" name="JLH Logistics" parent="hertsens_toinvoice_menu" sequence="1" action="jlh_ritten_invoice_action"/>

        <menuitem id="hertsens_invoices_menu" name="Invoices" parent="hertsens_invoicing_menu" sequence="1" action="" />

        <menuitem id="hertsens_invoices_menu_her" name="Hertsens" parent="hertsens_invoices_menu" sequence="1" action="hertsens_her_invoices_action" groups="hertsens_base.group_hertsens_user_her" />
        <menuitem id="hertsens_invoices_menu_jlh" name="JLH Logistics" parent="hertsens_invoices_menu" sequence="1" action="hertsens_jlh_invoices_action" groups="hertsens_base.group_hertsens_user_jlh" />

    </data>
</openerp>